<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>BACKOFFICE | OPERACIONES | <%= config.app.company.shortName %></title>
    <link
    rel="stylesheet"
    href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"
  />
  <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.13.0/css/all.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.datatables.net/buttons/1.7.0/css/buttons.dataTables.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.datatables.net/colreorder/1.5.3/css/colReorder.dataTables.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.datatables.net/scroller/2.0.3/css/scroller.dataTables.min.css"
  />
  <link
    rel="stylesheet"
    href="https://cdn.datatables.net/select/1.3.3/css/select.dataTables.min.css"
  />

  <!-- <script src="https://kit.fontawesome.com/yourcode.js" crossorigin="anonymous"></script> -->
  <link rel="stylesheet" href="/stylesheets/entidadesTable.css" type="text/css">
  <link rel="stylesheet" href="/stylesheets/base.css" type="text/css" />
  <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> -->


 

  <!-- PARA CUALQUIER NAVEGADOR -->
  <link
    rel="icon"
    href="/images/android-icon-36x36"
    sizes="32x32"
    type="image/png"
  />

  <!-- PARA LOS MODELOS MAS RECIENTES DE IPAD Y IPHONE -->
  <link
    rel="apple-touch-icon-precomposed"
    href="/images/apple-icon-152x152.png"
    type="image/png"
    sizes="152x152"
  />
  <link
    rel="apple-touch-icon-precomposed"
    href="/images/apple-icon-120x120.png"
    type="image/png"
    sizes="120x120"
  />

  <!-- PARA GOOGLE TV -->
  <link
    rel="icon"
    href="/images/favicon-96x96.png"
    sizes="96x96"
    type="image/png"
  />
  <!-- AQUÍ TE ENCONTRARAS CON MAS ETIQUETAS COMO: Title, script, meta... -->

  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
  <script src="https://rawgit.com/notifyjs/notifyjs/master/dist/notify.js"></script>
  <script src="https://cdn.datatables.net/1.10.25/js/jquery.dataTables.min.js"></script>
  <script src="https://cdn.datatables.net/fixedcolumns/4.0.1/js/dataTables.fixedColumns.min.js"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script> -->


  <script src="/javascripts/base.js"></script>

  <script src="/javascripts/jquery.number.js"></script>
  <script src="/javascripts/backofficeOperation.js"></script>


  <script
    type="text/javascript"
    language="javascript"
    src="https://cdn.datatables.net/buttons/1.7.0/js/dataTables.buttons.min.js"
  ></script>
  <script
    type="text/javascript"
    language="javascript"
    src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.colVis.min.js"
  ></script>
  <script
    type="text/javascript"
    language="javascript"
    src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.flash.min.js"
  ></script>
  <script
    type="text/javascript"
    language="javascript"
    src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.html5.min.js"
  ></script>
  <script
    type="text/javascript"
    language="javascript"
    src="https://cdn.datatables.net/buttons/1.7.0/js/buttons.print.min.js"
  ></script>
  <script
    type="text/javascript"
    language="javascript"
    src="https://cdn.datatables.net/colreorder/1.5.3/js/dataTables.colReorder.min.js"
  ></script>
  <script
    type="text/javascript"
    language="javascript"
    src="https://cdn.datatables.net/scroller/2.0.3/js/dataTables.scroller.min.js"
  ></script>
  <script
    type="text/javascript"
    language="javascript"
    src="https://cdn.datatables.net/select/1.3.3/js/dataTables.select.min.js"
  ></script>
  <script
    type="text/javascript"
    language="javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.6.0/jszip.min.js"
  ></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js"></script>
 <script src="https://cdn.socket.io/4.8.1/socket.io.min.js"></script>
</head>
</head>
<body>
  <%- include('base.ejs') %>
   <div class="contenido">
    <div id="tabs" style="width: 99%; margin-left: auto; margin-right: auto; height: 96%">
      <ul>
        <li><a href="#TradeTickets">Trade tickets</a></li>
        <li><a href="#FciTickets">FCI tickets</a></li>
      </ul>
      <div id="TradeTickets">
        <span>
          <button id="loading-data-trade" class="ui-button ui-widget ui-corner-all">
            Cargar datos
          </button>
        </span>
        <table id="tradeTicketsTable" style="width: 100% !important; table-layout: fixed;"  class="row-border hover order-column compact cell-border nowrap">
        </table>
        <div id="modal-content-trade" style="padding: 0px, 10px">
            <form>
              <table style="padding: 10px 16px 0px 16px;">
                <tr>
                  <td align="right"><label for="from_date">Desde&nbsp;:&nbsp;</label></td>
                  <td align="left"><input style="width: 274px;" type="date" id="from_date_trade" name="from_date" required></td>
                </tr>
                <tr>
                  <td align="right"><label for="to_date">Hasta&nbsp;:&nbsp;</label></td>
                  <td align="left"><input style="width: 274px;" type="date" id="to_date_trade" name="to_date" required></td>
                </tr>
              </table>
            </form>
        </div>
        <div id="loadingDataTraderTicket">
        </div>  
      </div>
      <div id="FciTickets">
        <span>
          <button id="loading-data-fci" class="ui-button ui-widget ui-corner-all">
            Cargar datos
          </button>
        </span>
        <table id="fciTicketsTable" style="width: 100% !important; table-layout: fixed;"  class="row-border hover order-column compact cell-border nowrap">         
        </table>
        <div id="modalOperacionesContent" style="padding: 0px, 10px">
          <form>
            <table style="padding: 10px 16px 0px 16px;">
              <tr>
                <td align="right"><label for="from_date">Desde&nbsp;:&nbsp;</label></td>
                <td align="left"><input style="width: 274px;" type="date" id="from_date" name="from_date" required></td>
              </tr>
              <tr>
                <td align="right"><label for="to_date">Hasta&nbsp;:&nbsp;</label></td>
                <td align="left"><input style="width: 274px;" type="date" id="to_date" name="to_date" required></td>
              </tr>
            </table>  
          </form>
        </div>
        <div id="loadingDataFCITickets">
          
        </div>
      </div>
    </div>
   </div>
   <script>
   $(document).ready(function() {
        // Función para obtener el día hábil anterior evitando sábados y domingos
        function getPreviousBusinessDay(date) {
        // Restar un día a la fecha actual
         date.setDate(date.getDate() - 1);
        // Mientras la fecha sea sábado (6) o domingo (0), restar un día más
        while (date.getDay() === 6 || date.getDay() === 0) {
        date.setDate(date.getDate() - 1);
         }
         // Devolver la fecha ajustada
         return date;
        }

        // Crear un nuevo objeto Date con la fecha actual
        var previousBusinessDay = getPreviousBusinessDay(new Date());
        // Establecer el valor del input 'from_date' con la fecha del día hábil anterior en formato 'YYYY-MM-DD'
        $("input[name='from_date']").val(previousBusinessDay.toISOString().split('T')[0]);

        $("input[name='to_date']").val(new Date().toISOString().split('T')[0]);

        $("input[name='account']").val('555');

        // obtener todos los formulario aplicar event.preventDefault() para evitar que se recargue la página
        $("form").submit(function(event) {
            event.preventDefault();
        })
  });
   </script>
</body>
</html>